kuznets.20.40(real.equiv.consumption[urban==1], hhwght[urban==1]),
kuznets.20.40(real.equiv.consumption, hhwght)),
kuznets.se = c(
boot.ineq( kuznets.20.40, real.equiv.consumption[urban==0], settle.equiv.df$hhwght[urban==0], num.of.straps),
boot.ineq( kuznets.20.40, real.equiv.consumption[urban==1], settle.equiv.df$hhwght[urban==1], num.of.straps),
boot.ineq( kuznets.20.40, real.equiv.consumption, settle.equiv.df$hhwght, num.of.straps)
),
CV = c(coef.of.variation(real.equiv.consumption[urban==0], hhwght[urban==0]),
coef.of.variation(real.equiv.consumption[urban==1], hhwght[urban==1]),
coef.of.variation(real.equiv.consumption, hhwght)),
CV.se = c(
boot.ineq( coef.of.variation, real.equiv.consumption[urban==0], settle.equiv.df$hhwght[urban==0], num.of.straps),
boot.ineq( coef.of.variation, real.equiv.consumption[urban==1], settle.equiv.df$hhwght[urban==1], num.of.straps),
boot.ineq( coef.of.variation, real.equiv.consumption, settle.equiv.df$hhwght, num.of.straps)
)
)
}
)
ineq.measures.df$area <- c("Rural", "Urban", "Combined")
ineq.measures.df$N <- c(sum(settle.equiv.df$urban==0),
sum(settle.equiv.df$urban==1),
nrow(settle.equiv.df)
)
ineq.measures.df
1.1351183+0.07015380 *2
1.1351183-0.07015380 *2
0.4077836 + 2*0.007889369
rural.lorenz <- with(settle.equiv.df, {
cumsum(sort(rep(real.equiv.consumption[urban==0], times=round(hhwght[urban==0])))) /
sum(rep(real.equiv.consumption[urban==0], times=round(hhwght[urban==0])) )
}
)
urban.lorenz <- with(settle.equiv.df, {
cumsum(sort(rep(real.equiv.consumption[urban==1], times=round(hhwght[urban==1])))) /
sum(rep(real.equiv.consumption[urban==1], times=round(hhwght[urban==1])) )
}
)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, lty=3, col="red")
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban", lty=1, col=c("black", "red"))
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"))
table(quantile( rural.lorenz, probs=seq(0, 1, .001) ) < quantile( urban.lorenz, probs=seq(0, 1, .001) ))
lorenz.which <- which(quantile( rural.lorenz, probs=seq(0, 1, .001) ) < quantile( urban.lorenz, probs=seq(0, 1, .001) ))
lorenz.which
?png
png(filename=paste0(work.dir, "lorenz.png"), width=3, height=3)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
png(filename=paste0(work.dir, "lorenz.png"), width=4, height=4)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
png(filename=paste0(work.dir, "lorenz.png"), width=4.5, height=4.5)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
?par
png(filename=paste0(work.dir, "lorenz.png"), width=4.5, height=4.5)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
png(filename=paste0(work.dir, "lorenz.png"), width=6, height=6)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", title="Figure 3: Lorenz curves")
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i")
?plot
plot(sin, -pi, 2*pi)
plot(sin, -pi, 2*pi)
plot(sin, -pi, 2*pi)
png(filename=paste0(work.dir, "lorenz.png"), width=6, height=6)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
plot(sin, -pi, 2*pi)
?png
png(filename=paste0(work.dir, "lorenz.png"), width=3, height=3, units="in")
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
# png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
pdf(filename=paste0(work.dir, "lorenz.pdf"), width=3, height=3)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
?pdf
# png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
pdf(file=paste0(work.dir, "lorenz.pdf"), width=3, height=3)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
# png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
pdf(file=paste0(work.dir, "lorenz.pdf"), width=4, height=4)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="")
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
# png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
pdf(file=paste0(work.dir, "lorenz.pdf"), width=4, height=4)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="", asp=1)
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
# png(filename=paste0(work.dir, "lorenz.png"), width=480, height=480)
pdf(file=paste0(work.dir, "lorenz.pdf"), width=4, height=4)
par(mar=c(5, 4, 4, 2) + 0.1)
par(pty="s")  ## before plotting
plot(x=0:1, y=0:1, type="l", ylim=0:1, xlim=0:1, xaxs = "i", yaxs = "i", main="Figure 3: Lorenz curves", xlab="", ylab="", asp=1)
lines( (1:length(rural.lorenz)) / length(rural.lorenz),  y = rural.lorenz)
lines( (1:length(urban.lorenz)) / length(urban.lorenz),  y = urban.lorenz, col="red")
# , lty=3
# abline(h=0)
# abline(v=1)
# Maybe no way to deal with not having dotted lines
legend("topleft", legend=c("Rural", "Urban"), lty=1, col=c("black", "red"), lwd=2)
dev.off()
par(pty="m")
table(quantile( rural.lorenz, probs=seq(0, 1, .001) ) < quantile( urban.lorenz, probs=seq(0, 1, .001) ))
lorenz.which <- which(quantile( rural.lorenz, probs=seq(0, 1, .001) ) < quantile( urban.lorenz, probs=seq(0, 1, .001) ))
1 - quantile( rural.lorenz, probs=seq(0, 1, .001) )[lorenz.which]
1 - quantile( urban.lorenz, probs=seq(0, 1, .001) )[lorenz.which]
quantile( rural.lorenz, probs=seq(0, 1, .001) )[length(seq(0, 1, .001))]
quantile( rural.lorenz, probs=seq(0, 1, .001) )[length(seq(0, 1, .001))-1]
quantile( urban.lorenz, probs=seq(0, 1, .001) )[length(seq(0, 1, .001))-1]
weighted.mean(settle.equiv.df$real.equiv.consumption[urban==0], settle.equiv.df$hhwght[urban==0])
weighted.mean(settle.equiv.df$real.equiv.consumption[urban==1], settle.equiv.df$hhwght[urban==1])
weighted.mean(settle.equiv.df$real.equiv.consumption[settle.equiv.df$urban==0], settle.equiv.df$hhwght[settle.equiv.df$urban==0])
weighted.mean(settle.equiv.df$real.equiv.consumption[settle.equiv.df$urban==1], settle.equiv.df$hhwght[settle.equiv.df$urban==1])
weighted.mean(settle.equiv.df$real.equiv.consumption[settle.equiv.df$urban==0], settle.equiv.df$hhwght[settle.equiv.df$urban==0]) /
weighted.mean(settle.equiv.df$real.equiv.consumption[settle.equiv.df$urban==1], settle.equiv.df$hhwght[settle.equiv.df$urban==1])
1 - quantile( rural.lorenz, probs=seq(0, 1, .001) )[lorenz.which]
stargazer(poverty.probit, title="Results", align=TRUE)
install.packages("stargazer")
library(stargazer)
stargazer(poverty.probit, title="Results", align=TRUE)
summary(poverty.probit)
stargazer(poverty.probit, title="Results", align=F)
stargazer(poverty.probit, title="Results", align=TRUE, no.space=TRUE)
stargazer(poverty.probit, title="Probit on Household Likelihood of Being Poor", align=TRUE, no.space=TRUE)
unique(settle.equiv.head.df$region)
unique(settle.equiv.head.df$act)
# settle.equiv.df <- lsms.df[!duplicated(lsms.df$codhh), ]
table(lsms.df$parent)
length(unique(lsms.df$codhh))
# These two quantitles above are equal, so just take the subset wit hthe
settle.equiv.df$is.poor <- as.numeric(settle.equiv.df$real.equiv.consumption <= settle.equiv.df$povline )
# educ hhsize runwater drtfloor electr bathroom departmt region male age act parent
table(settle.equiv.df$departmt, settle.equiv.df$region)
settle.equiv.head.df <- settle.equiv.df[settle.equiv.df$parent %in% "head", ]
set.seed(100)
sample.split <- rep(FALSE, nrow(settle.equiv.head.df))
sample.split[sample(1:nrow(settle.equiv.head.df), size=round(nrow(settle.equiv.head.df)/2))] <- TRUE
#svyglm() in the survey
# install.packages("survey")
library(survey)
# install.packages("stargazer")
library(stargazer)
summary(
poverty.probit <- svyglm(is.poor ~ educ + I(educ^2) + hhsize + runwater + drtfloor + electr + bathroom + region + male + age + I(age^2) + act,
design=svydesign(id=~1, weights=~hhwght, data=settle.equiv.head.df, subset=sample.split),
family= quasibinomial(link = "probit")
)
) # + region  departmt
stargazer(poverty.probit, title="Probit on Household Likelihood of Being Poor", align=TRUE, no.space=TRUE)
unique(settle.equiv.head.df$region)
unique(settle.equiv.head.df$act)
summary(
poverty.probit <- svyglm(is.poor ~ educ + I(educ^2) + hhsize + runwater + drtfloor + electr + bathroom + region + male + age + I(age^2) + act,
design=svydesign(id=~1, weights=~hhwght, data=settle.equiv.head.df, subset=sample.split),
family= quasibinomial(link = "probit")
)
) # + region  departmt
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
dev.off()
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
dev.off()
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
plot(1)
par(mar=c(5, 4, 4, 2) + 0.1)
plot(1)
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
plot(1)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
?legend
legend("right", legend=c("Type I", "Type II"))
legend("right", legend=c("Type I", "Type II"), cex=.8)
legend("right", legend=c("Type I", "Type II", "Sum of types I & II"), cex=.8)
legend("right", legend=c("Type I", "Type II", "Sum of types I & II"), cex=.6)
legend("right", legend=c("Type I", "Type II", "Sum of types I & II"), cex=.7, col=c("red", "blue", "green"), lty=1)
legend("right", legend=c("Type I", "Type II", "Sum of types\n I & II"), cex=.7, col=c("red", "blue", "green"), lty=1)
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\n I & II"), cex=.7, col=c("red", "blue", "green"), lty=1)
dev.off()
legend("right", legend=c("Type I", "Type II", "Sum of types\n I & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. theshold")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\n I & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
dev.off()
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. threshold")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\n I & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
dev.off()
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. threshold")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\nI & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
dev.off()
classification.error.mat <- matrix(0, ncol=2, nrow=length(cutoff.seq) )
for ( i in 1:length(cutoff.seq)) {
error.rate.table <- prop.table(table(
rep(poverty.predict, times=round(settle.equiv.cross.v.df[, "hhwght"])) > cutoff.seq[i],
rep(settle.equiv.cross.v.df[, "is.poor"], times=round(settle.equiv.cross.v.df[, "hhwght"]))
), margin=2)
classification.error.mat[i , 1] <- error.rate.table[ 1, 2]
if (nrow(error.rate.table)==1 & rownames(error.rate.table)=="TRUE") {
classification.error.mat[i , 2] <-1
classification.error.mat[i , 1] <-0
next}
if (nrow(error.rate.table)==1 & rownames(error.rate.table)=="FALSE") {
classification.error.mat[i , 2] <-0
classification.error.mat[i , 1] <-1
next}
classification.error.mat[i , 2] <- error.rate.table[ 2, 1]
}
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. threshold")
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\nI & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
dev.off()
classification.error.mat[classification.error.mat[, 1] <= 0.1,]
cutoff.green.zone[length(cutoff.green.zone)]
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. threshold", xaxs = "i", yaxs = "i",)
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
pdf(file=paste0(work.dir, "poverty misclassification.pdf"), width=4, height=4)
plot(matrix(c(0,1,0,1), nrow=2), col="white", xlab="Classification threshold", ylab="Error rate", main="Figure 4: Error rate vs. threshold", xaxs = "i", yaxs = "i",)
lines(x=cutoff.seq, y=rowSums(classification.error.mat), col="green", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 1], col="red", lwd=2)
lines(x=cutoff.seq, y=classification.error.mat[, 2], col="blue", lwd=2)
cutoff.green.zone <- cutoff.seq[classification.error.mat[, 1] <= 0.1]
classification.error.mat[classification.error.mat[, 1] <= 0.1,]
cutoff.green.zone[length(cutoff.green.zone)]
abline(v=cutoff.green.zone[length(cutoff.green.zone)], lty=2)
legend("right", legend=c("Type I", "Type II", "Sum of types\nI & II"), cex=.7, col=c("red", "blue", "green"), lty=1, lwd=2)
dev.off()
nrow(crossover.check)
k
13/28
summary(lsms.df$alfabet)
summary(lsms.df$educ)
summary(lsms.df$language)
summary(lsms.df$occ)
summary(lsms.df$act)
summary(lsms.df$position)
summary(lsms.df$hhsize)
summary(lsms.df$headmale)
pov.dets.df <- lsms.df[lsms.df$parent %in% "head", ]
summary(pov.dets.df$alfabet)
summary(pov.dets.df$educ)
summary(pov.dets.df$language)
summary(pov.dets.df$occ)
summary(pov.dets.df$act)
summary(pov.dets.df$position)
summary(pov.dets.df$hhsize)
summary(pov.dets.df$headmale)
?lm
summary(pov.det.lm <- lm(log(real.per.cap.consumption) ~ alfabet + educ + language + occ + act + position + hhsize + headmale + region, weights=hhwght, data=pov.dets.df)
)
summary(pov.det.lm <- lm(log(real.per.cap.consumption) ~ alfabet + educ + I(educ^2) + age + I(age^2) + language + occ + act + position + hhsize + headmale + region, weights=hhwght, data=pov.dets.df)
)
pov.dets.df$occ[is.na(pov.dets.df$occ)] <- "unemp"
pov.dets.df$occ <- as.character(pov.dets.df$occ)
pov.dets.df$act <- as.character(pov.dets.df$act)
pov.dets.df$position <- as.character(pov.dets.df$position)
pov.dets.df$occ[is.na(pov.dets.df$occ)] <- "unemp"
pov.dets.df$act[is.na(pov.dets.df$act)] <- "unemp"
pov.dets.df$position[is.na(pov.dets.df$position)] <- "unemp"
summary(pov.det.lm <- lm(log(real.per.cap.consumption) ~ alfabet + educ + I(educ^2) + age + I(age^2) + language + occ + act + position + hhsize + headmale + region, weights=hhwght, data=pov.dets.df)
)
install.packages("texreg")
library("texreg")
texreg(pov.det.lm, single.row=TRUE)
names(coef(pov.det.lm))[grepl("languageIng", names(coef(pov.det.lm)))]
?substr
names(coef(pov.det.lm))[substr(1, 11, names(coef(pov.det.lm)))) == "languageIng", ]
names(coef(pov.det.lm))[substr(1, 11, names(coef(pov.det.lm))) == "languageIng" ]
names(coef(pov.det.lm))
names(coef(pov.det.lm))[substr(names(coef(pov.det.lm)), 1, 11) == "languageIng" ]
names(coef(pov.det.lm))[substr(names(coef(pov.det.lm)), 1, 11) == "languageIng" ] <- "languageIng"
texreg(pov.det.lm, single.row=TRUE)
names(pov.det.lm)
names(pov.det.lm$coefficients)[substr(names(pov.det.lm$coefficients), 1, 11) == "languageIng" ]
names(pov.det.lm$coefficients)[substr(names(pov.det.lm$coefficients), 1, 11) == "languageIng" ] <- "languageIng"
texreg(pov.det.lm, single.row=TRUE)
texreg(pov.det.lm, single.row=TRUE, use.packages =TRUE)
texreg(pov.det.lm, single.row=TRUE, use.packages =TRUE,  dcolumn = TRUE, booktabs = TRUE)
?stargazer
stargazer(pov.det.lm, title="Probit on Household Likelihood of Being Poor", align=TRUE, no.space=TRUE, single.row=TRUE)
stargazer(pov.det.lm, title="Probit on Household Likelihood of Being Poor", align=TRUE, no.space=TRUE
)
stargazer(pov.det.lm, title="Probit on Household Likelihood of Being Poor"
)
stargazer(pov.det.lm, title="Probit on Household Likelihood of Being Poor", align=TRUE, no.space=TRUE, single.row=TRUE)
stargazer(pov.det.lm, title="Probit on Household Likelihood of Being Poor", align=FALSE, no.space=TRUE, single.row=TRUE)
install.packages("maBina")
library(maBina)
?install.packages
?cov
?grad
install.packages("solnp")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
627/20
627/20
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
627/20
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
library("slidify")
setwd("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14")
slidify("/Users/travismcarthur/git/slidify-presentations/slidify-presentations-pages/SRC-10-29-14/index.Rmd")
load("/Users/travismcarthur/Desktop/Metrics (637)/Final paper/Rdata results files/double hurdle.Rdata")
library("AER")
chisq.test(crop.wide.df$received.credit, crop.wide.df$hhh.literacy)
table(crop.wide.df$hhh.literacy, crop.wide.df$education)
names(crop.wide.df)
table(crop.wide.df$hhh.literacy, crop.wide.df$hhh.edu.measure.r)
summary(lambda.calc.1.lm <- lm( received.credit ~ indig.prop + drive.time.urban + mean.ann.rain.5yr + elevation + hhh.sex + hhh.literacy,
data=crop.wide.df))
lm( received.credit ~ indig.prop + drive.time.urban + mean.ann.rain.5yr + elevation + hhh.sex + hhh.literacy,
data=crop.wide.df)
names(crop.wide.df)
summary(lambda.calc.1.lm <- lm( credit.source.r ~ indig.prop + drive.time.urban + mean.ann.rain.5yr + elevation + hhh.sex + hhh.literacy,
data=crop.wide.df))
lm( credit.source.r ~ indig.prop + drive.time.urban + mean.ann.rain.5yr + elevation + hhh.sex + hhh.literacy,
data=crop.wide.df)
str(crop.wide.df$credit.source.r)
summary(lambda.calc.1.lm <- lm( I(credit.source.r=="Received.Credit") ~ indig.prop + drive.time.urban + mean.ann.rain.5yr + elevation + hhh.sex + hhh.literacy,
data=crop.wide.df))
table(crop.wide.df$credit.source.r, crop.wide.df$hhh.edu.measure.r)
